# Регистратор
## Считывает показания датчиков и передаёт их по сети.

# Условия работы
- Проверялось на плате **Uno/Nano** с ethernet модулем **enc28j60**.
- Нужна промежуточная программа по перебрасыванию пакетов с UDP в http POST запрос [https://github.com/avoronkov17/NetConvertor]. 

# Начало работы
В объявление **SERVER_IP** заменить четыре актета IPv4 адреса через запятую на адрес программы, в которой идёт приём пакетов. Ссылка на программу:[https://github.com/avoronkov17/NetConvertor].

# Особенности Nano
В Arduino Nano присутствует недоработка в обработке перезапуска платы по WatchDog. После первого срабатывания WatchDog устанавливается на 65ms и прошивка не успевает правильно сбросить WatchDog при инициализации. 
Чтобы это исправить нужно установить альтернативный загрузчик:

Нужно установить ядро miniCore
1. [https://github.com/MCUdude/MiniCore]
Процесс добавления ядра в разделе **How to Install**

2. После установки лучше перезапустить среду. После этого в подменю выбора плат появится раздел **MiniCore**. В нём нужно выбрать **Atmega328**

3. В меню **Инструменты** выставить 
- Clock - External 16 MHz
- BOD - это пороговое минимальное напряжение при достижении которого плата будет перезапущена. Выбрать по своему усмотрению
- EEPROM: retained
- Compiler LTO : disabled  
- Variant 328P/328PA
- Bootoader: Yes (UART0)
4. В меню **Скетч** выбрать **записать загрузчик** через соответствующее меню, а после этого **записать через программатор**.


